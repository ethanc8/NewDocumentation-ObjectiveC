<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Modules" href="Modules.html" /><link rel="prev" title="NS_ERROR_ENUM / CF_ERROR_ENUM" href="NS_ENUM/NS_ERROR_ENUM.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.04.27 -->
        <title>Traditional Message Forwarding - Objective-C 2.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=437aa6ec" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Objective-C 2.4 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Objective-C 2.4 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Objective-C Language Reference</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Objective-C Language Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="BasicTypes.html">Basic Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="Classes.html">Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="Properties.html">Properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="LightweightGenerics.html">Lightweight Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="StringLiterals.html">String literals</a></li>
<li class="toctree-l2"><a class="reference internal" href="DynamicLiterals.html">Dynamic literals</a></li>
<li class="toctree-l2"><a class="reference internal" href="FastEnumeration.html">Fast enumeration</a></li>
<li class="toctree-l2"><a class="reference internal" href="Exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="Attributes.html">Attributes</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="NS_ENUM/index.html"><code class="docutils literal notranslate"><span class="pre">NS_ENUM</span></code> macros</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of NS_ENUM macros</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="NS_ENUM/NS_CLOSED_ENUM.html"><code class="docutils literal notranslate"><span class="pre">NS_CLOSED_ENUM</span></code> / <code class="docutils literal notranslate"><span class="pre">CF_CLOSED_ENUM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="NS_ENUM/NS_ENUM.html"><code class="docutils literal notranslate"><span class="pre">NS_ENUM</span></code> / <code class="docutils literal notranslate"><span class="pre">CF_ENUM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="NS_ENUM/NS_ERROR_ENUM.html"><code class="docutils literal notranslate"><span class="pre">NS_ERROR_ENUM</span></code> / <code class="docutils literal notranslate"><span class="pre">CF_ERROR_ENUM</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Traditional Message Forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="Modules.html">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="EnvInformation.html">Getting Environment Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="Versions.html">Language Versions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Manual/index.html">Manual</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Manual</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Manual/Introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Manual/Objects.html">2.2 Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Manual/Classes.html">Classes</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="traditional-message-forwarding">
<h1>Traditional Message Forwarding<a class="headerlink" href="#traditional-message-forwarding" title="Permalink to this heading">¶</a></h1>
<section id="gcc-runtime">
<h2>GCC runtime<a class="headerlink" href="#gcc-runtime" title="Permalink to this heading">¶</a></h2>
<p>Taken from GCC’s <a class="reference external" href="https://github.com/gcc-mirror/gcc/blob/16e2427f50c208dfe07d07f18009969502c25dc8/libobjc/objc/message.h"><code class="docutils literal notranslate"><span class="pre">&lt;objc/message.h&gt;</span></code></a>.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">IMP</span><span class="w"> </span><span class="nf">objc_msg_lookup</span><span class="w"> </span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">receiver</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="w"> </span><span class="n">op</span><span class="p">);</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">receiver</span></code> does not respond to the selector <code class="docutils literal notranslate"><span class="pre">op</span></code>, <code class="docutils literal notranslate"><span class="pre">objc_msg_lookup()</span></code>
will try to call <code class="docutils literal notranslate"><span class="pre">+resolveClassMethod:</span></code> or <code class="docutils literal notranslate"><span class="pre">resolveInstanceMethod:</span></code> as
appropriate, and if they return <code class="docutils literal notranslate"><span class="pre">YES</span></code>, it will try the lookup again
(<code class="docutils literal notranslate"><span class="pre">+resolveClassMethod:</span></code> and <code class="docutils literal notranslate"><span class="pre">+resolveInstanceMethod:</span></code> can thus install
dynamically methods as they are requested).  If
<code class="docutils literal notranslate"><span class="pre">+resolveClassMethod:</span></code> or <code class="docutils literal notranslate"><span class="pre">+resolveInstanceMethod:</span></code> are either not
available, or return NO, or return YES but ‘receiver’ still doesn’t
implement the ‘selector’ after calling them, the runtime returns a
generic “forwarding” function that can be called with the required
method signature and which can process the method invocation
according to the forwarding API.  There are two runtime hooks that
allow Foundation libraries (such as GNUstep-Base) to return their
own forwarding function in preference to the runtime ones.  When
that happens, the Foundation library effectively takes complete
control of the forwarding process; any method invocation where the
selector is not implemented by the receiver will end up calling a
forwarding function chosen by the Foundation library.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="n">objc_EXPORT</span><span class="w"> </span><span class="nf">IMP</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">__objc_msg_forward</span><span class="p">)(</span><span class="kt">SEL</span><span class="p">);</span>
<span class="n">objc_EXPORT</span><span class="w"> </span><span class="nf">IMP</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">__objc_msg_forward2</span><span class="p">)(</span><span class="kt">id</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="p">);</span>
</pre></div>
</div>
<p>Hooks for method forwarding.  They make it easy to substitute the
built-in forwarding with one based on a library, such as <code class="docutils literal notranslate"><span class="pre">ffi</span></code>, that
implement closures, thereby avoiding gcc’s <code class="docutils literal notranslate"><span class="pre">__builtin_apply</span></code>
problems.  <code class="docutils literal notranslate"><span class="pre">__objc_msg_forward2</span></code>’s result will be preferred over that
of <code class="docutils literal notranslate"><span class="pre">__objc_msg_forward</span></code> if both are set and return non-NULL.</p>
</section>
<section id="apple-next-runtime">
<h2>Apple/NeXT runtime<a class="headerlink" href="#apple-next-runtime" title="Permalink to this heading">¶</a></h2>
<p>The forward handler is set by the function <code class="docutils literal notranslate"><span class="pre">objc_setForwardHandler</span></code>. The default forward handler in Objective-C 1.x is <code class="docutils literal notranslate"><span class="pre">nil</span></code>. The runtime, if it detects a forward handler of <code class="docutils literal notranslate"><span class="pre">nil</span></code>, will call <code class="docutils literal notranslate"><span class="pre">forward::</span></code> on the object. In Objective-C 2.x, the default forward handler prints a message detailing the error and exits the program.</p>
</section>
<section id="objc-setforwardhandler">
<h2><code class="docutils literal notranslate"><span class="pre">objc_setForwardHandler</span></code><a class="headerlink" href="#objc-setforwardhandler" title="Permalink to this heading">¶</a></h2>
<p>Sets the function to be called by <code class="docutils literal notranslate"><span class="pre">objc_msgForward</span></code>.</p>
<p>Defined in <code class="docutils literal notranslate"><span class="pre">&lt;objc/runtime.h&gt;</span></code>.</p>
<section id="declaration">
<h3>Declaration<a class="headerlink" href="#declaration" title="Permalink to this heading">¶</a></h3>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">objc_setForwardHandler</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">fwd</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">fwd_stret</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="paramaters">
<h3>Paramaters<a class="headerlink" href="#paramaters" title="Permalink to this heading">¶</a></h3>
</section>
<section id="code-snippets">
<h3>Code snippets<a class="headerlink" href="#code-snippets" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&lt;objc/message.h&gt;</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Message Forwarding Primitives</span>
<span class="cm"> * Use these functions to forward a message as if the receiver did not </span>
<span class="cm"> * respond to it. </span>
<span class="cm"> *</span>
<span class="cm"> * The receiver must not be nil.</span>
<span class="cm"> * </span>
<span class="cm"> * class_getMethodImplementation() may return (IMP)_objc_msgForward.</span>
<span class="cm"> * class_getMethodImplementation_stret() may return (IMP)_objc_msgForward_stret</span>
<span class="cm"> * </span>
<span class="cm"> * These functions must be cast to an appropriate function pointer type </span>
<span class="cm"> * before being called. </span>
<span class="cm"> *</span>
<span class="cm"> * Before Mac OS X 10.6, _objc_msgForward must not be called directly </span>
<span class="cm"> * but may be compared to other IMP values.</span>
<span class="cm"> */</span>
<span class="cp">#if !OBJC_OLD_DISPATCH_PROTOTYPES</span>
<span class="cp">#pragma clang diagnostic push</span>
<span class="cp">#pragma clang diagnostic ignored &quot;-Wincompatible-library-redeclaration&quot;</span>
<span class="n">OBJC_EXPORT</span><span class="w"> </span><span class="kt">void</span>
<span class="n">_objc_msgForward</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="cm">/* id receiver, SEL sel, ... */</span><span class="w"> </span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="n">OBJC_AVAILABLE</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">9.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>

<span class="n">OBJC_EXPORT</span><span class="w"> </span><span class="kt">void</span>
<span class="n">_objc_msgForward_stret</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="cm">/* id receiver, SEL sel, ... */</span><span class="w"> </span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="n">OBJC_AVAILABLE</span><span class="p">(</span><span class="mf">10.6</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">9.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">)</span>
<span class="w">    </span><span class="n">OBJC_ARM64_UNAVAILABLE</span><span class="p">;</span>
<span class="cp">#pragma clang diagnostic pop</span>
<span class="cp">#else</span>
<span class="n">OBJC_EXPORT</span><span class="w"> </span><span class="kt">id</span><span class="w"> </span><span class="n">_Nullable</span>
<span class="n">_objc_msgForward</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">receiver</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span>
<span class="w">    </span><span class="n">OBJC_AVAILABLE</span><span class="p">(</span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">9.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">);</span>

<span class="n">OBJC_EXPORT</span><span class="w"> </span><span class="kt">void</span>
<span class="n">_objc_msgForward_stret</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">receiver</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="w"> </span><span class="n">_Nonnull</span><span class="w"> </span><span class="n">sel</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span>
<span class="w">    </span><span class="n">OBJC_AVAILABLE</span><span class="p">(</span><span class="mf">10.6</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">9.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">)</span>
<span class="w">    </span><span class="n">OBJC_ARM64_UNAVAILABLE</span><span class="p">;</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">objc-runtime.mm</span></code></p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="cp">#if !__OBJC2__</span>

<span class="c1">// Default forward handler (nil) goes to forward:: dispatch.</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_objc_forward_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">nil</span><span class="p">;</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_objc_forward_stret_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">nil</span><span class="p">;</span>

<span class="cp">#else</span>

<span class="c1">// Default forward handler halts the process.</span>
<span class="bp">__attribute__</span><span class="p">((</span><span class="k">noreturn</span><span class="p">,</span><span class="w"> </span><span class="n">cold</span><span class="p">))</span><span class="w"> </span><span class="kt">void</span>
<span class="n">objc_defaultForwardHandler</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="w"> </span><span class="n">sel</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_objc_fatal</span><span class="p">(</span><span class="s">&quot;%c[%s %s]: unrecognized selector sent to instance %p &quot;</span>
<span class="w">                </span><span class="s">&quot;(no message forward handler is installed)&quot;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="n">class_isMetaClass</span><span class="p">(</span><span class="n">object_getClass</span><span class="p">(</span><span class="nb">self</span><span class="p">))</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sc">&#39;+&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="sc">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="n">object_getClassName</span><span class="p">(</span><span class="nb">self</span><span class="p">),</span><span class="w"> </span><span class="n">sel_getName</span><span class="p">(</span><span class="n">sel</span><span class="p">),</span><span class="w"> </span><span class="nb">self</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_objc_forward_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">objc_defaultForwardHandler</span><span class="p">;</span>

<span class="cp">#if SUPPORT_STRET</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">stret</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span><span class="w"> </span><span class="p">};</span>
<span class="bp">__attribute__</span><span class="p">((</span><span class="k">noreturn</span><span class="p">,</span><span class="w"> </span><span class="n">cold</span><span class="p">))</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">stret</span>
<span class="n">objc_defaultForwardStretHandler</span><span class="p">(</span><span class="kt">id</span><span class="w"> </span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="kt">SEL</span><span class="w"> </span><span class="n">sel</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">objc_defaultForwardHandler</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">sel</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">_objc_forward_stret_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">objc_defaultForwardStretHandler</span><span class="p">;</span>
<span class="cp">#endif</span>

<span class="cp">#endif</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">objc_setForwardHandler</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">fwd</span><span class="p">,</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">fwd_stret</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">_objc_forward_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fwd</span><span class="p">;</span>
<span class="cp">#if SUPPORT_STRET</span>
<span class="w">    </span><span class="n">_objc_forward_stret_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fwd_stret</span><span class="p">;</span>
<span class="cp">#endif</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">¶</a></h2>
<p><a class="reference external" href="http://www.cilinder.be/docs/next/NeXTStep/3.3/nd/GeneralRef/01_RootClass/Classes/Object.htmld/index.html">NeXT Release 3.3 documentation for <code class="docutils literal notranslate"><span class="pre">Object</span></code> class</a></p>
<p><a class="reference external" href="http://www.cilinder.be/docs/next/NeXTStep/3.3/nd/GeneralRef/15_RunTime/Functions/RunTimeFunctions.htmld/index.html">NeXT Release 3.3 documentation for runtime functions</a></p>
<p><a class="reference external" href="http://web.archive.org/web/20140115122206if_/http://lists.apple.com/archives/objc-language/2007/Oct/msg00036.html">Re: <code class="docutils literal notranslate"><span class="pre">objc_setForwardHandler</span></code></a></p>
<section id="apple-objective-c-runtime-source-code-version-818-2">
<h3>Apple Objective-C runtime source code (version 818.2)<a class="headerlink" href="#apple-objective-c-runtime-source-code-version-818-2" title="Permalink to this heading">¶</a></h3>
<p><a class="reference external" href="https://opensource.apple.com/source/objc4/objc4-818.2/runtime/runtime.h.auto.html"><code class="docutils literal notranslate"><span class="pre">&lt;objc/runtime.h&gt;</span></code></a></p>
<p><a class="reference external" href="https://opensource.apple.com/source/objc4/objc4-818.2/runtime/message.h.auto.html"><code class="docutils literal notranslate"><span class="pre">&lt;objc/message.h&gt;</span></code></a></p>
<p><a class="reference external" href="https://opensource.apple.com/source/objc4/objc4-818.2/runtime/objc-runtime.mm"><code class="docutils literal notranslate"><span class="pre">objc-runtime.mm</span></code></a></p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="Modules.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Modules</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="NS_ENUM/NS_ERROR_ENUM.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><code class="docutils literal notranslate"><span class="pre">NS_ERROR_ENUM</span></code> / <code class="docutils literal notranslate"><span class="pre">CF_ERROR_ENUM</span></code></div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Ethan C, GNUstep contributors, Swift contributors, LLVM contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Traditional Message Forwarding</a><ul>
<li><a class="reference internal" href="#gcc-runtime">GCC runtime</a></li>
<li><a class="reference internal" href="#apple-next-runtime">Apple/NeXT runtime</a></li>
<li><a class="reference internal" href="#objc-setforwardhandler"><code class="docutils literal notranslate"><span class="pre">objc_setForwardHandler</span></code></a><ul>
<li><a class="reference internal" href="#declaration">Declaration</a></li>
<li><a class="reference internal" href="#paramaters">Paramaters</a></li>
<li><a class="reference internal" href="#code-snippets">Code snippets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references">References</a><ul>
<li><a class="reference internal" href="#apple-objective-c-runtime-source-code-version-818-2">Apple Objective-C runtime source code (version 818.2)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=5b92e3a5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    </body>
</html>